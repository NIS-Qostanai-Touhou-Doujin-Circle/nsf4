# Документация к проекту (Not So Far v4 - Backend)

## Обзор

Бэкенд проекта реализован на языке программирования Rust. Он предоставляет API для работы с данными, поддерживает видеостриминг через RTMP и взаимодействует с базой данных и Redis. Основные функции включают обработку данных от дронов, управление видеопотоками и предоставление данных через WebSocket.

---

## Структура проекта

### Основные файлы

- **Cargo.toml**: Конфигурационный файл проекта Rust, содержащий зависимости и настройки.
- **DOCKERFILE**: Dockerfile для сборки и запуска бэкенда.
- **migrations/**: Скрипты миграции базы данных.
- **logs/**: Логи работы бэкенда.

### Директория `src/`

#### `main.rs`

Главная точка входа в приложение. Содержит настройку и запуск сервера.

#### `api/`

Модуль для реализации API.

- **drones.rs**: Эндпоинты для работы с данными дронов.
- **feed.rs**: Эндпоинты для предоставления данных фида.
- **mod.rs**: Объединяет все модули API.

#### `config/`

Модуль для работы с конфигурацией.

- **mod.rs**: Загрузка и управление конфигурацией приложения.

#### `database/`

Модуль для работы с базой данных.

- **mod.rs**: Подключение к базе данных и выполнение запросов.

#### `models/`

Модели данных, используемые в приложении.

- **mod.rs**: Определение структур данных и их маппинг на базу данных.

#### `redis/`

Модуль для работы с Redis.

- **mod.rs**: Подключение и операции с Redis.

#### `rtmp/`

Модуль для работы с RTMP (Real-Time Messaging Protocol).

- **mod.rs**: Управление видеостримингом.

#### `services/`

Сервисы для бизнес-логики.

- **drone_client.rs**: Логика взаимодействия с клиентами дронов.
- **mod.rs**: Объединяет все сервисы.

#### `websocket/`

Модуль для работы с WebSocket.

- **mod.rs**: Реализация WebSocket-соединений для передачи данных в реальном времени.

---

## Как запустить

### Предварительные требования

- Установленный Rust и Cargo.
- Docker (опционально, для запуска через контейнер).

### Шаги запуска

1. **Установите зависимости**:

   ```bash
   cargo build
   ```

2. **Запустите сервер**:

   ```bash
   cargo run
   ```

3. **(Опционально) Запустите через Docker**:

   ```bash
   docker build -t backend .
   docker run -p 8080:8080 backend
   ```

---

## Основные функции

- **API для дронов**: Обработка данных от дронов и предоставление API для взаимодействия.
- **Видеостриминг**: Поддержка RTMP для потоковой передачи видео.
- **WebSocket**: Передача данных в реальном времени.
- **Работа с базой данных**: Хранение и управление данными через MySQL.
- **Интеграция с Redis**: Кэширование и управление состоянием.
- **Статистика подключений**: Аналитика состояния потока медиаданных (Реализованна через API, но не подключенна к веб интерфейсу)

---

## Логи

Логи работы приложения сохраняются в директории `logs/`. Они включают информацию о запросах, ошибках и других событиях.

---

## Контакты

Для вопросов и поддержки обращайтесь к бекенд разработчику проекта.

- Кошевой Константин
